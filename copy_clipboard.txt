import streamlit as st

# Example chatbot response (You would replace this with your chatbot's actual response)
latest_response = "This is the latest response from the bot."

# Display the latest response
st.write(f"Bot: {latest_response}")

# Add a button to copy the response to the clipboard
copy_button = st.button("Copy to clipboard")

# JavaScript code to copy the latest response to clipboard
if copy_button:
    st.write("""
        <script>
        const response = `"{}"`;
        navigator.clipboard.writeText(response).then(() => {
            alert('Copied to clipboard!');
        }).catch(err => {
            alert('Failed to copy text: ' + err);
        });
        </script>
    """.format(latest_response), unsafe_allow_html=True)
-----------------


import streamlit as st

# Example chatbot response (replace with your chatbot's actual response)
latest_response = "This is the latest response from the bot."

# Display the latest response
st.write(f"Bot: {latest_response}")

# Add a button to copy the response to the clipboard
copy_button = st.button("Copy to clipboard", key="copy_button")

# JavaScript code to copy the latest response to clipboard
if copy_button:
    st.markdown(f"""
        <script>
        const response = `{latest_response}`;
        navigator.clipboard.writeText(response).then(() => {{
            alert('Copied to clipboard!');
        }}).catch(err => {{
            console.error('Failed to copy text: ', err);
        }});
        </script>
    """, unsafe_allow_html=True)
--------------------

import streamlit as st

# Example chatbot response stored in session state (replace with your actual chatbot response logic)
if 'answer' not in st.session_state:
    st.session_state['answer'] = "This is the latest response from the bot."

# Display the latest response
st.write(f"Bot: {st.session_state['answer']}")

# Add a button to copy the response to the clipboard
copy_button = st.button("Copy to clipboard", key="copy_button")

# Inject JavaScript for clipboard copying without triggering a re-run
if copy_button:
    # This JavaScript will run without affecting Streamlit's execution
    st.markdown(f"""
        <script>
        const response = `{st.session_state['answer']}`;
        navigator.clipboard.writeText(response).then(() => {{
            alert('Copied to clipboard!');
        }}).catch(err => {{
            console.error('Failed to copy text: ', err);
        }});
        </script>
    """, unsafe_allow_html=True)
---------------
import streamlit as st

# Example chatbot response stored in session state (replace with your actual chatbot response logic)
if 'answer' not in st.session_state:
    st.session_state['answer'] = "This is the latest response from the bot."

# Display the latest response
st.write(f"Bot: {st.session_state['answer']}")

# Create a hidden text input field to hold the text you want to copy
st.text_input("Hidden text field", st.session_state['answer'], key="copy_text", type="default")

# Add a button to trigger the clipboard copy
copy_button = st.button("Copy to clipboard", key="copy_button")

# Inject JavaScript to copy text from the hidden text field to clipboard
if copy_button:
    st.markdown(f"""
        <script>
        var copyText = document.getElementById('copy_text');
        navigator.clipboard.writeText(copyText.value).then(() => {{
            alert('Copied to clipboard!');
        }}).catch(err => {{
            console.error('Failed to copy text: ', err);
        }});
        </script>
    """, unsafe_allow_html=True)

-------------------------------------
import streamlit as st
import streamlit.components.v1 as components

# Example chatbot response stored in session state (replace with your actual chatbot response logic)
if 'answer' not in st.session_state:
    st.session_state['answer'] = "This is the latest response from the bot."

# Display the latest response
st.write(f"Bot: {st.session_state['answer']}")

# Button to trigger the copy action
if st.button("Copy to clipboard"):
    # Inject custom HTML and JavaScript directly using Streamlit's components.html
    components.html(f"""
        <script>
        function copyToClipboard(text) {{
            const textarea = document.createElement('textarea');
            textarea.value = text;
            document.body.appendChild(textarea);
            textarea.select();
            document.execCommand('copy');
            document.body.removeChild(textarea);
            alert('Copied to clipboard!');
        }}
        copyToClipboard(`{st.session_state['answer']}`);
        </script>
    """, height=0)


Hello there! 

Hello there! How can I assist you today?
---------------------------------
import streamlit as st

# Example chatbot response stored in session state (replace with your actual chatbot response logic)
if 'answer' not in st.session_state:
    st.session_state['answer'] = "This is the latest response from the bot."

# Display the latest response
st.write(f"Bot: {st.session_state['answer']}")

# Use st.markdown to inject HTML and JavaScript for clipboard functionality
st.markdown(f"""
    <script>
    function copyToClipboard() {{
        const textToCopy = `{st.session_state['answer']}`;
        const textarea = document.createElement('textarea');
        textarea.value = textToCopy;
        document.body.appendChild(textarea);
        textarea.select();
        document.execCommand('copy');
        document.body.removeChild(textarea);
        alert('Copied to clipboard!');
    }}
    </script>
    <button onclick="copyToClipboard()">Copy to clipboard</button>
""", unsafe_allow_html=True)
---------------

import streamlit as st

# Example chatbot response stored in session state (replace with your actual chatbot response logic)
if 'answer' not in st.session_state:
    st.session_state['answer'] = "This is the latest response from the bot."

# Display the latest response
st.write(f"Bot: {st.session_state['answer']}")

# Inject the JavaScript code and create a button to copy to clipboard
st.markdown(f"""
    <script>
    function copyToClipboard() {{
        var textToCopy = `{st.session_state['answer']}`;
        var tempTextArea = document.createElement("textarea");
        tempTextArea.value = textToCopy;
        document.body.appendChild(tempTextArea);
        tempTextArea.select();
        document.execCommand("copy");
        document.body.removeChild(tempTextArea);
        alert("Copied to clipboard!");
    }}
    </script>
    <button onclick="copyToClipboard()">Copy to clipboard</button>
""", unsafe_allow_html=True)

-------------------------------
import streamlit as st

# Content to copy
text_to_copy = "im pooki"

# Display the content
st.write("Text to copy:")
# st.code(text_to_copy, language="text")

# Button to copy to clipboard using HTML and JS
copy_button_html = f"""
    <button onclick="navigator.clipboard.writeText('{text_to_copy}')">
        Copy to clipboard
    </button>
"""

# Display the HTML in Streamlit
st.components.v1.html(copy_button_html)
---------------------
import streamlit as st

# Content to copy
text_to_copy = "im pooki"

# Display the content
st.write("Text to copy:")
st.code(text_to_copy, language="text")

# Button to copy to clipboard using HTML and JS with proper error handling
copy_button_html = f"""
    <script>
        function copyToClipboard() {{
            if (navigator.clipboard) {{
                navigator.clipboard.writeText("{text_to_copy}").then(function() {{
                    alert('Text copied to clipboard!');
                }}, function(err) {{
                    console.error('Could not copy text: ', err);
                }});
            }} else {{
                alert('Clipboard API not supported!');
            }}
        }}
    </script>
    <button onclick="copyToClipboard()">Copy to clipboard</button>
"""

# Display the HTML in Streamlit
st.components.v1.html(copy_button_html)
---------------------------------

import streamlit as st

# Content to copy
text_to_copy = "im pooki"

# Display the content
st.write("Text to copy:")
st.code(text_to_copy, language="text")

# Using input field and fallback JavaScript
copy_button_html = f"""
    <input type="text" value="{text_to_copy}" id="textToCopy" style="position: absolute; left: -9999px;">
    <button onclick="copyFallback()">Copy to clipboard</button>

    <script>
        function copyFallback() {{
            var copyText = document.getElementById("textToCopy");
            copyText.select();
            document.execCommand("copy");
            alert("Text copied to clipboard!");
        }}
    </script>
"""

# Display the HTML in Streamlit
st.components.v1.html(copy_button_html)
----------------
import streamlit as st

# Content to copy
text_to_copy = "im pooki"

# Display the content
st.write("Text to copy:")
st.code(text_to_copy, language="text")

# Streamlit Button
if st.button('Copy to clipboard'):
    # Use st.components to embed the HTML + JS to copy the text to clipboard
    copy_script = f"""
    <input type="text" value="{text_to_copy}" id="textToCopy" style="position: absolute; left: -9999px;">
    <script>
        function copyFallback() {{
            var copyText = document.getElementById("textToCopy");
            copyText.select();
            document.execCommand("copy");
            alert("Text copied to clipboard!");
        }}
        copyFallback();
    </script>
    """
    
    # Display the hidden input field and run the JavaScript when the button is clicked
    st.components.v1.html(copy_script)
----------------
import streamlit as st

# Content to copy
text_to_copy = "im pooki"

# Display the content
st.write("Text to copy:")
st.code(text_to_copy, language="text")

# HTML button that looks like Streamlit's button and uses JavaScript for copying to clipboard
copy_button_html = f"""
    <input type="text" value="{text_to_copy}" id="textToCopy" style="position: absolute; left: -9999px;">
    <button style="
        background-color: #f63366;
        color: white;
        padding: 0.25em 0.5em;
        border-radius: 0.25em;
        border: none;
        cursor: pointer;
        font-size: 1.1em;
        font-weight: bold;
    " onclick="copyFallback()">Copy to clipboard</button>

    <script>
        function copyFallback() {{
            var copyText = document.getElementById("textToCopy");
            copyText.select();
            document.execCommand("copy");
            alert("Text copied to clipboard!");
        }}
    </script>
"""

# Display the HTML button in Streamlit
st.components.v1.html(copy_button_html)

---------------------
import streamlit as st

# Content to copy
text_to_copy = "im pooki"

# Display the content
st.write("Text to copy:")
st.code(text_to_copy, language="text")

# HTML button that looks like an icon (📋) and doesn't cause layout issues
copy_button_html = f"""
    <input type="text" value="{text_to_copy}" id="textToCopy" style="position: absolute; left: -9999px;">
    <button style="
        background-color: transparent;
        border: none;
        cursor: pointer;
        font-size: 1.5em;
    " title="Copy to clipboard" onclick="copyFallback()">📋</button>

    <script>
        function copyFallback() {{
            var copyText = document.getElementById("textToCopy");
            copyText.select();
            document.execCommand("copy");
            alert("Text copied to clipboard!");
        }}
    </script>
    <style>
        /* Remove excess margin or padding added by Streamlit */
        button {{
            margin: 0;
            padding: 0;
        }}
    </style>
"""

# Display the HTML button in Streamlit
st.components.v1.html(copy_button_html, height=50)

# Other Streamlit buttons (for other functionalities)
if st.button("Another Functionality Button"):
    st.write("Another functionality triggered!")

--------------
import streamlit as st

# Simulate user input (you can replace this with actual user input logic)
user_input = st.text_input("Enter something to enable buttons:")

# Content to copy
text_to_copy = "im pooki"

# Create four columns with the specified layout ratios
col1, col2, col3, col4 = st.columns([0.5, 0.5, 4, 4])

with col1:
    if user_input:  # Only show the thumbs-up button if there's user input
        if st.button("+1 👍", key="thumbs_up"):
            st.write("You clicked thumbs up!")

with col2:
    if user_input:  # Only show the thumbs-down button if there's user input
        if st.button("-1 👎", key="thumbs_down"):
            st.write("You clicked thumbs down!")

with col3:
    if user_input:  # Only show the copy to clipboard button if there's user input
        # HTML for the copy to clipboard button
        copy_button_html = f"""
            <input type="text" value="{text_to_copy}" id="textToCopy" style="position: absolute; left: -9999px;">
            <button style="
                background-color: transparent;
                border: none;
                cursor: pointer;
                font-size: 1.5em;
                vertical-align: middle;  /* Aligns button with other elements */
                line-height: 1.5em;       /* Ensures button height matches */
            " title="Copy to clipboard" onclick="copyFallback()">📋</button>

            <script>
                function copyFallback() {{
                    var copyText = document.getElementById("textToCopy");
                    copyText.select();
                    document.execCommand("copy");
                    alert("Text copied to clipboard!");
                }}
            </script>
            <style>
                button {{
                    margin: 0;
                    padding: 0;
                    vertical-align: middle;  /* Aligns the button inline */
                }}
            </style>
        """
        # Display the copy to clipboard button
        st.components.v1.html(copy_button_html, height=50)

# You can use col4 for other functionality or leave it empty for now.
with col4:
    st.write("Other functionality here.")

